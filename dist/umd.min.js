/*
 * Copyright(c) 2014, Unional (https://github.com/unional)
 * @license Licensed under the MIT License (https://github.com/unional/unional/LICENSE)).
 * @version 0.4.10
 * Created by unional on 9/21/14.
 */

(function(e){function o(e){var t=e.toString().replace(i,""),n=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(s);return n===null&&(n=[]),n}function u(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=e.indexOf(n);r===0&&(e=e.replace(n,t[n]))}return e}function a(e,t){return u(e,t).replace(/[\.\/]/g,".")}function f(e,t){return function(n){return e(u(n,t))}}function l(e,t,n){return function(){if(arguments.length>0&&typeof arguments[0]=="function"){var r=arguments[0],i=o(r);if(i.length>0&&i[0]==="require"){var s=t.s.contexts._,u=s.makeRequire;s.makeRequire=function(){var e=u.apply(s,arguments);return f(e,n)},arguments[0]=i.length===1?function(e){return s.makeRequire=u,r.apply(s,arguments)}:function(e,t,n){return s.makeRequire=u,r.apply(s,arguments)}}}e.apply(this,arguments)}}function c(e,t){if(!e||typeof e!="object"&&typeof e!="function")return e;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];typeof r!="object"||!r?e[n]=r:e.hasOwnProperty(n)?c(e[n],r):e[n]=r}return e}function h(e,t){function u(){i!=="pending"&&(clearInterval(o),i=="resolved"?r&&typeof r.then=="function"&&r.then.length===2?r.then(s.resolve,s.reject):s.resolve(r):s.reject(r))}var n=this,r,i="pending",s,o,a={resolve:function(){try{r=e.apply(n,arguments),i="resolved",s&&u()}catch(t){a.reject(t)}},reject:function(e){t&&t.call(n,e),r=e,i="rejected"},promise:{then:function(e,t){return s=h(e,t),o=setInterval(u,0),s.promise}}};return a}function p(e,r,i,s){var o=null,u,f,l,p,m,g,y,b={},w=!1,E,S,x,T,N,C,k,L,A;typeof arguments[1]=="function"?(s=arguments[2],i=arguments[1],r={}):(r=r||{},o=r.stubs?r.stubs:r);if(!Array.isArray(e))throw new Error("Dependencies must be an array.");m=v.globalRequire;if(typeof m=="undefined"||m===v.require){n++,u="stub"+n,f=t["default"].config.paths,l={};for(p in o)o.hasOwnProperty(p)&&(l[a(p,f)]=o[p]);return g=t[u]=new d({stubs:l,paths:f}),r.reloadAll||(g.modules=c({},t["default"].modules),g.setReloadTargets(e.map(function(e){return a(e,f)}))),y=h(i,s),g.require(e,y.resolve,y.reject),y.promise}if(m.defined){for(p in o)o.hasOwnProperty(p)&&(w=!0,E="stub"+p+n,b[p]=E,function(e){var t=o[e];define(E,[],function(){return t})}(p));n++,S="context_"+n,x=m.s.contexts._.config,T={context:S,baseUrl:x.baseUrl,paths:x.paths,pkgs:x.pkgs,shim:x.shim},w&&(T.map=x.map&&x.map["*"]?{"*":c(x.map["*"],b)}:{"*":b}),N=m.config(T);if(!T.reloadAll){C=m.s.contexts._.defined;for(k in C)C.hasOwnProperty(k)&&!b[k]&&e.indexOf(k)===-1&&(m.s.contexts[S].defined[k]=C[k]);for(L=0;L<e.length;L++)A=e[L],m.s.contexts[S].require.undef(A)}return y=h(i,s),N(e,y.resolve,y.reject),y.promise}throw new Error("stubRequire not implemented for node.js yet.")}function d(e){function i(e,t){if(e.length===0)return;var r=e.shift();n.resolveModule(r,function(n){t.push(n),i(e,t)})}this.reloadTargets=[],this.modules={},this.config=c({paths:{}},e);var n=this;this.require=function(t,r,s){var o;if(!t){o=new Error("moduleName can't be empty");if(s){s(o);return}throw o}try{if(!Array.isArray(t))return n.resolveModule(t,r,s);var u=[];i(t,u),u&&r&&r.apply(this,u)}catch(o){throw s&&s(o),o}},this.require.config=function(n){n=n||{};var r=t["default"];return n.context?(r=t[n.context],r?r.updateConfig(n):r=t[n.context]=new d(n)):r.updateConfig(n),r.require},this.createDefine=function(t,i,s){return typeof t=="string"&&(s=arguments[1],i=arguments[0],t=undefined),function(o){var u={exports:{}},a;if(typeof o=="object")a=o;else{var l;n.config.stubs&&n.config.stubs.require?l=n.config.stubs.require:s?l=f(n.require,s):l=n.require,a=o(l,u.exports,u),a=typeof a!="undefined"?a:u.exports}if(t)t(i,a);else if(i){r[i]=o;if(n.reloadTargets.indexOf(i)===-1){var h=i.split(/[.\/]/),p=h.pop(),d=v.ns(h.join("."));d[p]!==a&&(d[p]=c(a,d[p]))}n.modules[i]=a}}}}var t={},n=0,r={},i=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,s=/([^\s,]+)/g;typeof global!="undefined"&&(e=global),d.prototype.updateConfig=function(t){this.config=c(this.config,t)},d.prototype.setReloadTargets=function(t){this.reloadTargets=t},d.prototype.resolveModule=function(n,i,s){var o=this.config.stubs||{},u=this.config.paths||{},f=a(n,u);if(o[f])return i&&i(o[f]),o[f];if(this.reloadTargets.indexOf(f)!==-1){var l=r[f];l&&this.createDefine(f)(l)}if(this.modules[f])return i&&i(this.modules[f]),this.modules[f];var c=n.split("!",2),h=undefined;c.length==2&&(n=c[0],c[1]&&(h=c[1]));var p=n.split("/"),d=p.shift();if(u[d]){var v=u[d].split("/");p=v.concat(p),d=p.shift()}var m=e[d];while(m&&p.length)d=p.shift(),m=m[d];if(c.length==2&&m&&typeof m.load=="function"){var g=i||function(e){m=e};g.error=s||function(){},m.load(h,this.require,g,this.config)}return i&&i(m),m},t["default"]=new d;var v=function(e,t,n,r,i,s,o){if(arguments.length===6)if(typeof arguments[1]=="function"&&typeof arguments[2]=="string")o=arguments[5],s=arguments[4],i=arguments[3],r=null;else{if(typeof arguments[1]!="string"||typeof arguments[2]!="object")throw new Error("Invalid arguments.");o=arguments[5],s=arguments[4],i=arguments[3],r=arguments[2],n=arguments[1],t=undefined}else if(arguments.length===5)if(typeof arguments[1]=="string")o=arguments[4],s=arguments[3],i=arguments[2],r=null,n=arguments[1],t=null;else{if(typeof arguments[1]!="object")throw new Error("Invalid arguments");o=arguments[4],s=arguments[3],i=arguments[2],r=arguments[1],n=null,t=null}else arguments.length===4&&(o=arguments[3],s=arguments[2],i=arguments[1],r=null,n=null,t=null);if(v.isRequireJS()){var u=r&&r.requireJS?l(define,i,r.requireJS):define;e(u)}else v.isNodeJS()?e(function(e){var t=r&&r.nodeJS?f(i,r.nodeJS):i,n=typeof e=="object"?e:e(t,s,o);typeof n!="undefined"&&(o.exports=n)}):r&&r.browserGlobal?e(v.createDefine(t,n,r.browserGlobal)):e(v.createDefine(t,n))};v.namespace=function(n){var r;for(var i=0,s=arguments.length;i<s;i++){n=arguments[i];var o=n.split(/[.\/]/),u=o.shift();if(u===""){r=e;continue}r=e[u]=e[u]||{};while(o.length)u=o.shift(),r=r[u]=r[u]||{}}return r},v.ns=v.namespace,v.isRequireJS=function(){return typeof define=="function"&&define.amd!=undefined},v.isAmd=v.isRequireJS,v.isNodeJS=function(){return typeof require=="function"&&typeof exports=="object"&&typeof module=="object"},v.isCommonJS=v.isNodeJS,v.isBrowserGlobal=function(){return!v.isAmd()&&!v.isCommonJS()},v.stubRequire=p,v.createContext=p,v.globalRequire=typeof require=="function"?require:e.require,v.require=t["default"].require,v.createDefine=t["default"].createDefine,v.browserGlobal={define:function(e,t){var n=t.split(/[.\/]/),r=n.pop(),i=v.ns(n.join("."));i[r]=c(e,i[r])}},typeof global!="undefined"?(global.umd=v,module.exports=v):(e.umd=v,e.require=e.require||undefined,e.module=e.module||undefined,e.exports=e.exports||undefined)})(this),define("src/umd",function(){});