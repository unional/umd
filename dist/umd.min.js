/*
 * Copyright(c) 2014, Unional (https://github.com/unional)
 * @license Licensed under the MIT License (https://github.com/unional/unional/LICENSE)).
 * @version 0.4.6
 * Created by unional on 9/21/14.
 */

(function(e){function o(e){var t=e.toString().replace(i,""),n=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(s);return n===null&&(n=[]),n}function u(e,t){return function(n){return e(t[n]||n)}}function a(e,t,n){return function(){if(arguments.length>0&&typeof arguments[0]=="function"){var r=arguments[0],i=o(r);if(i.length>0&&i[0]==="require"){var s=t.s.contexts._,a=s.makeRequire;s.makeRequire=function(){var e=a.apply(s,arguments);return u(e,n)},arguments[0]=i.length===1?function(e){return s.makeRequire=a,r.apply(s,arguments)}:function(e,t,n){return s.makeRequire=a,r.apply(s,arguments)}}}e.apply(this,arguments)}}function f(e,t){var n={},r;if(e&&typeof e=="object")for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(r in t)if(t.hasOwnProperty(r)){var i=t[r];typeof i!="object"||!i?n[r]=i:e[r]?n[r]=f(e[r],i):n[r]=i}return n}function l(e){return e.replace(/\./g,"/")}function c(e,r,i,s){if(!Array.isArray(e))throw new Error("Dependencies must be an array.");var o=p.globalRequire;if(typeof o=="undefined"||o===p.require){n++;var u="stub"+n,a=t[u]=new h({stubs:r,mapping:t.default.config.mapping,paths:t.default.config.paths});a.setReloadTargets(e),a.require(e,i,s)}else{if(!o.defined)throw new Error("stubRequire not implemented for node.js yet.");var f={},l=!1;for(var c in r)if(r.hasOwnProperty(c)){l=!0;var d="stub"+c+n;f[c]=d,function(e){var t=r[e];define(d,[],function(){return t})}(c)}if(l){n++;var v="context_"+n,m=o.s.contexts._.config,g={context:v,baseUrl:m.baseUrl,paths:m.paths,pkgs:m.pkgs,shim:m.shim};l&&(g.map={"*":f});var y=o.config(g),b=o.s.contexts._.defined;for(var w in b)b.hasOwnProperty(w)&&!f[w]&&e.indexOf(w)===-1&&(o.s.contexts[v].defined[w]=b[w]);y(e,i,s)}else{for(var E in e)o.undef(e[E]);o(e,i,s)}}}function h(e){this.reloadTargets=[],this.modules={},this.config=f({mapping:{},paths:{}},e);var n=this;this.require=function(t,r,i){var s;if(!t){s=new Error("moduleName can't be empty");if(i){i(s);return}throw s}var o;try{if(!Array.isArray(t))return o=n.resolveModule(t),o&&r&&r(o),o;var u=t.map(function(e){return n.resolveModule(e)});u&&r&&r.apply(this,u)}catch(s){throw i&&i(s),s}},this.require.config=function(n){var r=t.default;return n.context?(r=t[n.context],r?r.updateConfig(n):r=t[n.context]=new h(n)):r.updateConfig(n),r.require},this.createDefine=function(t,i){return function(s){var o={exports:{}},a;if(typeof s=="object")a=s;else{var f=i?u(n.require,i):n.require;a=s(f,o.exports,o),a=typeof a!="undefined"?a:o.exports}if(t){var c=l(t);r[c]=s;if(n.reloadTargets.indexOf(c)===-1){var h=t.split(/[.\/]/),d=h.pop(),v=p.ns(h.join("."));v[d]=a}n.modules[c]=a}}}}var t={},n=0,r={},i=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,s=/([^\s,]+)/g;typeof global!="undefined"&&(e=global),h.prototype.updateConfig=function(t){this.config=f(this.config,t)},h.prototype.setReloadTargets=function(t){this.reloadTargets=t.map(function(e){return l(e)})},h.prototype.resolveModule=function(n){var i=l(n),s=this.config.stubs||{},o=this.config.mapping||{},u=this.config.paths||{};if(s[i])return s[i];if(this.reloadTargets.indexOf(i)!==-1){var a=r[i];a&&this.createDefine(i)(a)}if(this.modules[i])return this.modules[i];n=o[n]||n;var f=n.split("!",2),c=undefined;f.length==2&&(n=f[0],f[1]&&(c=f[1]));var h=n.split("/"),p=h.shift();if(u[p]){var d=u[p].split("/");h=d.concat(h),p=h.shift()}var v=e[p];while(v&&h.length)p=h.shift(),v=v[p];return f.length==2&&(v=v(c)),v},t.default=new h({mapping:{},paths:{}});var p=function(e,t,n,r,i,s){if(p.isRequireJS()){var o=s&&s.requireJS?a(define,n,s.requireJS):define;e(o)}else p.isNodeJS()?e(function(e){var t=s&&s.nodeJS?u(n,s.nodeJS):n,o=typeof e=="object"?e:e(t,r,i);typeof o!="undefined"&&(i.exports=o)}):s&&s.browserGlobal?e(p.createDefine(t,s.browserGlobal)):e(p.createDefine(t))};p.namespace=function d(d){var t;for(var n=0,r=arguments.length;n<r;n++){d=arguments[n];var i=d.split(/[.\/]/),s=i.shift();t=e[s]=e[s]||{};while(i.length)s=i.shift(),t=t[s]=t[s]||{}}return t},p.ns=p.namespace,p.isRequireJS=function(){return typeof define=="function"&&define.amd!=undefined},p.isNodeJS=function(){return typeof require=="function"&&typeof exports=="object"&&typeof module=="object"},p.isBrowserGlobal=function(){return!p.isRequireJS()&&!p.isNodeJS()},p.stubRequire=c,p.globalRequire=typeof require=="function"?require:e.require,p.require=t.default.require,p.createDefine=t.default.createDefine,typeof global!="undefined"?(global.umd=p,module.exports=p):(e.umd=p,e.require=e.require||undefined,e.module=e.module||undefined,e.exports=e.exports||undefined)})(this),define("umd",function(){});